{"ast":null,"code":"var _jsxFileName = \"/Users/USER/AndroidStudioProjects/robot-market/frontend/src/components/body/index.js\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport \"./index.css\";\nimport axios from 'axios';\nimport { useEffect, useState } from 'react';\nimport NavBar from '../navbar';\nimport { useSelector } from 'react-redux';\nimport { formattedCurrency } from '../../utils';\nimport dateFormat from 'dateformat';\nimport { Alert } from 'reactstrap';\nimport SweetAlert from 'react-bootstrap-sweetalert';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function Body() {\n  _s();\n\n  //Get Currency from Redux Store\n  const curr = useSelector(state => state.currency); //Retrieve products from Robot api\n\n  const getProducts = () => axios.get('http://localhost:8000/api/robots').then(products => {\n    setProducts(products.data.data);\n    setUnfilterdProduct(products.data.data);\n  }).catch(err => console.log(err));\n\n  const [products, setProducts] = useState([]);\n  const [unFilteredProduct, setUnfilterdProduct] = useState([]);\n  useEffect(() => {\n    getProducts(curr);\n  }, [curr]);\n  console.log('data', products);\n  const [cartItems, setCartItems] = useState([]);\n  const [alert, setAlert] = useState(false);\n\n  const changeShow = item => {\n    if (cartItems.length <= 4) {\n      console.log('item', item);\n      increment(item);\n      displayNav(true);\n    } else {\n      setAlert(true);\n    }\n  };\n\n  useEffect(() => {\n    console.log('array', cartItems);\n  }, [cartItems]); //Check if cart item to be this ID\n\n  const isInCart = id => {\n    return cartItems.map(a => a.id).includes(id);\n  }; // Add count property to product\n\n\n  const addCountToProduct = product => {\n    return { ...product,\n      count: cartItems.find(a => a.id === product.id).count\n    };\n  }; //Increment individual cart item\n\n\n  const increment = (id, stock) => {\n    if (!isInCart(id)) {\n      setCartItems([...cartItems, {\n        id,\n        count: 1\n      }]);\n    } else {\n      setCartItems(cartItems.map(a => {\n        //if count is less than or equal to stock increment but if count exceeds stock show error\n        if (a.count + 1 <= stock) {\n          return a.id === id ? { ...a,\n            count: a.count + 1\n          } : a;\n        } else {\n          if (a.id === id) {\n            setAlert(true);\n            return { ...a,\n              count: stock\n            };\n          } else {\n            return { ...a,\n              count: a.count\n            };\n          }\n        }\n      }));\n    }\n  }; //remove item from product\n\n\n  const removeItem = id => {\n    setCartItems(cartItems.filter(a => a.id !== id));\n  }; //Decrement individual Cart Item\n\n\n  const decrement = id => {\n    if (isInCart(id)) {\n      const cartItem = cartItems.find(item => item.id === id);\n\n      if (cartItem.count === 1) {\n        removeItem(id);\n      } else {\n        setCartItems(cartItems.map(a => a.id === id ? { ...a,\n          count: a.count - 1\n        } : a));\n      }\n    }\n  };\n\n  const [showNav, setShowNav] = useState(false); //Display sidebar\n\n  const displayNav = shouldShow => {\n    if (shouldShow) {\n      document.body.style.overflow = \"hidden\";\n    } else {\n      document.body.style.overflow = \"auto\";\n    }\n\n    setShowNav(shouldShow);\n    console.log(showNav);\n  }; //hide alertBox\n\n\n  const hidelert = () => {\n    setAlert(false);\n  }; //filter by material type\n\n\n  const [text, setText] = useState('');\n  console.log('TEXT', text);\n\n  const onSearch = () => {\n    if (text == '') {\n      getProducts(curr);\n    } else {\n      setProducts(products.filter(item => {\n        return item.material == text;\n      }));\n    }\n\n    console.log('filtered', products);\n  };\n\n  useEffect(() => {\n    onSearch();\n  }, [text]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [alert && /*#__PURE__*/_jsxDEV(SweetAlert, {\n      title: \"You cannot select more items\",\n      onCancel: hidelert,\n      onConfirm: hidelert\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 19\n    }, this), /*#__PURE__*/_jsxDEV(NavBar, {\n      remove: removeItem,\n      showNav: showNav,\n      displayNav: displayNav,\n      increment: increment,\n      decrement: decrement,\n      number: cartItems.length,\n      items: products.filter(product => isInCart(product.id)).map(product => addCountToProduct(product))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container py-5\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-md-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            className: \"main-weight\",\n            children: \"All Products\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 169,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"weight-100\",\n            children: \"A 360\\xB0 look at Lumin\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 170,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            value: text,\n            onChange: event => setText(event.target.value),\n            placeholder: \"Username\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 171,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 168,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"grey-bg\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container-fluid py-5\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"row\",\n          children: products.map(item => {\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-md-6 col-lg-4 col-sm-6 margin-bottom\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-center\",\n                children: /*#__PURE__*/_jsxDEV(\"img\", {\n                  alt: \"product-img\",\n                  className: \"img-fluid img-height\",\n                  src: item.image\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 183,\n                  columnNumber: 33\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 182,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-center title\",\n                children: item.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 186,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-center\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"From\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 187,\n                  columnNumber: 56\n                }, this), \" \\u0E3F\", item.price]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 187,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-center title\",\n                children: [\"Stock: \", item.stock]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 188,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-center title\",\n                children: [\"Material: \", item.material]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 189,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-center title\",\n                children: dateFormat(item.createdAt, \"dS mmmm, yyyy\")\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 191,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-center\",\n                children: /*#__PURE__*/_jsxDEV(\"button\", {\n                  disabled: !item.stock,\n                  onClick: () => changeShow(item.id),\n                  className: \"button-primary \",\n                  children: \"Add to Cart\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 194,\n                  columnNumber: 33\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 193,\n                columnNumber: 29\n              }, this)]\n            }, item.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 181,\n              columnNumber: 34\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 13\n    }, this), alert && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: {\n        position: \"fixed\"\n      },\n      children: /*#__PURE__*/_jsxDEV(Alert, {\n        color: \"primary\",\n        children: \"This is a primary alert \\u2014 check it out!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 21\n    }, this)]\n  }, void 0, true);\n}\n\n_s(Body, \"q7HZgnrMG99naZBvfrHY/28G3aw=\", false, function () {\n  return [useSelector];\n});\n\n_c = Body;\n\nvar _c;\n\n$RefreshReg$(_c, \"Body\");","map":{"version":3,"sources":["/Users/USER/AndroidStudioProjects/robot-market/frontend/src/components/body/index.js"],"names":["React","axios","useEffect","useState","NavBar","useSelector","formattedCurrency","dateFormat","Alert","SweetAlert","Body","curr","state","currency","getProducts","get","then","products","setProducts","data","setUnfilterdProduct","catch","err","console","log","unFilteredProduct","cartItems","setCartItems","alert","setAlert","changeShow","item","length","increment","displayNav","isInCart","id","map","a","includes","addCountToProduct","product","count","find","stock","removeItem","filter","decrement","cartItem","showNav","setShowNav","shouldShow","document","body","style","overflow","hidelert","text","setText","onSearch","material","event","target","value","image","name","price","createdAt","position"],"mappings":"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","sourcesContent":["import React from 'react'\nimport \"./index.css\"\nimport axios from 'axios'\nimport { useEffect, useState } from 'react';\nimport NavBar from '../navbar';\nimport { useSelector } from 'react-redux'\nimport { formattedCurrency } from '../../utils';\nimport dateFormat from 'dateformat';\nimport { Alert } from 'reactstrap';\nimport SweetAlert from 'react-bootstrap-sweetalert';\n\nexport default function Body() {\n\n    //Get Currency from Redux Store\n    const curr = useSelector(state => state.currency);\n\n\n    //Retrieve products from Robot api\n    const getProducts = () =>\n        axios.get('http://localhost:8000/api/robots')\n            .then(products => {\n                setProducts(products.data.data)\n                setUnfilterdProduct(products.data.data)\n            }).catch(err => console.log(err))\n\n\n    const [products, setProducts] = useState([])\n    const [unFilteredProduct, setUnfilterdProduct] = useState([])\n \n\n    useEffect(() => {\n        getProducts(curr)\n    }, [curr])\n    console.log('data', products)\n\n\n    \n    const [cartItems, setCartItems] = useState([])\n    const [alert, setAlert] = useState(false)\n\n    const changeShow = (item) => {\n        if(cartItems.length <= 4 ){\n            console.log('item', item)\n            increment(item)\n            displayNav(true)\n        } else {\n          setAlert(true)\n        }\n       \n    }\n\n    useEffect(() => {\n        console.log('array', cartItems)\n    }, [cartItems])\n\n\n    //Check if cart item to be this ID\n    const isInCart = (id) => {\n        return cartItems.map(a => a.id).includes(id)\n    }\n\n\n    // Add count property to product\n    const addCountToProduct = (product) => {\n        return { ...product, count: cartItems.find(a => a.id === product.id).count }\n    }\n\n\n    //Increment individual cart item\n    const increment = (id, stock) => {\n        if (!isInCart(id)) {\n            setCartItems([...cartItems, { id, count: 1 }])\n        }\n        else {\n            setCartItems(cartItems.map(a => {\n                //if count is less than or equal to stock increment but if count exceeds stock show error\n                    if(a.count + 1 <= stock){\n                        return a.id === id  ? { ...a, count: a.count + 1 } : a\n                    } else {\n                        if(a.id === id ){\n                        setAlert(true)\n                       return  {...a, count: stock }\n                        } else {\n                          return  {...a, count: a.count }\n                        }\n\n                    }\n                       \n            }))\n        }\n    }\n\n    //remove item from product\n    const removeItem = (id) => {\n        setCartItems(cartItems.filter(a => a.id !== id))\n    }\n\n    //Decrement individual Cart Item\n    const decrement = (id) => {\n        \n        if (isInCart(id)) {\n            const cartItem = cartItems.find(item => item.id === id)\n    \n            if (cartItem.count === 1) {\n                removeItem(id)\n            }\n            else {\n                setCartItems(cartItems.map(a => a.id === id ? { ...a, count: a.count - 1 } : a))\n            }\n        }\n\n    }\n\n    const [showNav, setShowNav] = useState(false)\n\n\n    //Display sidebar\n    const displayNav = (shouldShow) => {\n        if (shouldShow) {\n            document.body.style.overflow = \"hidden\";\n        }\n        else {\n            document.body.style.overflow = \"auto\";\n        }\n        setShowNav(shouldShow)\n        console.log(showNav)\n    }\n\n\n    //hide alertBox\n    const hidelert = () => {\n        setAlert(false)\n    }\n\n    //filter by material type\n    const [text, setText] = useState('')\n\n    console.log('TEXT', text)\n     const onSearch = () => {\n        if(text == ''){\n            getProducts(curr)\n        } else {\n            setProducts( products.filter((item) => {\n               return item.material == text\n            }))\n        }\n        console.log('filtered', products)\n     }\n\n     useEffect(() => {\n       onSearch()\n     }, [text])\n\n\n\n   \n\n    return (\n        <>\n        {alert && <SweetAlert\n            title={\"You cannot select more items\"}\n            onCancel={hidelert}\n            onConfirm={hidelert}>\n            </SweetAlert>}\n            <NavBar remove={removeItem} showNav={showNav} displayNav={displayNav} increment={increment} decrement={decrement} number={cartItems.length} items={products.filter(product => isInCart(product.id)).map(product => addCountToProduct(product))} />\n            <div className=\"container py-5\">\n                <div className=\"row\">\n                    <div className=\"col-md-6\">\n                        <h1 className=\"main-weight\">All Products</h1>\n                        <p className=\"weight-100\">A 360° look at Lumin</p>\n                        <input value={text}  onChange={(event) => setText(event.target.value) } placeholder='Username'/>\n\n                    </div>\n                </div>\n            </div>\n            <div className=\"grey-bg\">\n                <div className=\"container-fluid py-5\">\n                    <div className=\"row\">\n                        {products.map((item) => {\n            \n                          return <div key={item.id} className=\"col-md-6 col-lg-4 col-sm-6 margin-bottom\">\n                            <div className=\"text-center\">\n                                <img alt=\"product-img\" className=\"img-fluid img-height\" src={item.image} />\n                            </div>\n\n                            <p className=\"text-center title\">{item.name}</p>\n                            <p className=\"text-center\"><span>From</span> ฿{item.price}</p>\n                            <p className=\"text-center title\">Stock: {item.stock}</p>\n                            <p className=\"text-center title\">Material: {item.material}</p>\n              \n                            <p className=\"text-center title\">{dateFormat(item.createdAt, \"dS mmmm, yyyy\")}</p>\n                            \n                            <div className=\"text-center\">\n                                <button disabled={!item.stock} onClick={() => changeShow(item.id)} className=\"button-primary \">Add to Cart</button>\n                            </div>\n                        </div>\n                        }\n                        )}\n\n                    </div>\n                </div>\n            </div>\n         {alert &&  <div className={{position: \"fixed\"}}>\n            <Alert color=\"primary\">\n            This is a primary alert — check it out!\n           </Alert>\n         </div> }\n\n        </>\n    )\n}\n"]},"metadata":{},"sourceType":"module"}