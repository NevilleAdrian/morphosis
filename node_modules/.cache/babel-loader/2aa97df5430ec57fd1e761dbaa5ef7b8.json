{"ast":null,"code":"var _jsxFileName = \"/Users/USER/Robot-Market/frontend/src/components/body/index.js\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport \"./index.css\";\nimport axios from 'axios';\nimport { useEffect, useState } from 'react';\nimport NavBar from '../navbar';\nimport dateFormat from 'dateformat';\nimport { Alert } from 'reactstrap';\nimport SweetAlert from 'react-bootstrap-sweetalert';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function Body() {\n  _s();\n\n  //Retrieve products from Robot api\n  // const getProducts = () =>\n  //     axios.get('http://localhost:8000/api/robots')\n  //         .then(products => {\n  //             setProducts(products.data.data)\n  //             setFilteredProduct(products.data.data)\n  // }).catch(err => console.log(err))\n  const getProducts = () => axios.get('https://laravelapi1.azurewebsites.net/api/products').then(products => {\n    setProducts(products.data.data);\n    setFilteredProduct(products.data.data);\n    setLoad(false);\n  }).catch(err => console.log(err)); //Hooks for loader\n\n\n  const [load, setLoad] = useState(true); //Hooks for products\n\n  const [products, setProducts] = useState([]); //Hooks to filter products\n\n  const [filteredProduct, setFilteredProduct] = useState([]); //Call getProducts on initstate\n\n  useEffect(() => {\n    getProducts();\n  }, []);\n  console.log('data', products);\n  console.log('load', load); //Initialize items in cart\n\n  const [cartItems, setCartItems] = useState([]); //Initialize a boolean to display Alert\n\n  const [alert, setAlert] = useState(false); //Logic to increment count. display navbar and display alert if item count is greater that 5\n\n  const changeShow = item => {\n    if (cartItems.length <= 4) {\n      increment(item);\n      displayNav(true);\n    } else {\n      setAlert(true);\n    }\n  };\n\n  useEffect(() => {\n    console.log('array', cartItems);\n  }, [cartItems]); //Check if cart item to be this ID\n\n  const isInCart = id => {\n    return cartItems.map(a => a.id).includes(id);\n  }; // Add count property to product\n\n\n  const addCountToProduct = product => {\n    return { ...product,\n      count: cartItems.find(a => a.id === product.id).count\n    };\n  }; //Increment individual cart item\n\n\n  const increment = (id, stock) => {\n    if (!isInCart(id)) {\n      setCartItems([...cartItems, {\n        id,\n        count: 1\n      }]);\n    } else {\n      setCartItems(cartItems.map(a => {\n        //if count is less than or equal to stock increment but if count exceeds stock show error\n        if (a.count + 1 <= stock) {\n          return a.id === id ? { ...a,\n            count: a.count + 1\n          } : a;\n        } else {\n          if (a.id === id) {\n            setAlert(true);\n            return { ...a,\n              count: stock\n            };\n          } else {\n            return { ...a,\n              count: a.count\n            };\n          }\n        }\n      }));\n    }\n  }; //remove item from product\n\n\n  const removeItem = id => {\n    setCartItems(cartItems.filter(a => a.id !== id));\n  }; //Decrement individual Cart Item\n\n\n  const decrement = id => {\n    if (isInCart(id)) {\n      const cartItem = cartItems.find(item => item.id === id);\n\n      if (cartItem.count === 1) {\n        removeItem(id);\n      } else {\n        setCartItems(cartItems.map(a => a.id === id ? { ...a,\n          count: a.count - 1\n        } : a));\n      }\n    }\n  };\n\n  const [showNav, setShowNav] = useState(false); //Display sidebar\n\n  const displayNav = shouldShow => {\n    if (shouldShow) {\n      document.body.style.overflow = \"hidden\";\n    } else {\n      document.body.style.overflow = \"auto\";\n    }\n\n    setShowNav(shouldShow);\n    console.log(showNav);\n  }; //hide alertBox\n\n\n  const hidelert = () => {\n    setAlert(false);\n  }; //filter by material type\n\n\n  const handleSearch = event => {\n    let value = event.target.value.toLowerCase();\n    let result = [];\n    console.log(value);\n    result = products.filter(data => {\n      return data.name.toLowerCase().search(value) != -1;\n    });\n    setFilteredProduct(result);\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [alert && /*#__PURE__*/_jsxDEV(SweetAlert, {\n      title: \"You cannot select more items\",\n      onCancel: hidelert,\n      onConfirm: hidelert\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 19\n    }, this), /*#__PURE__*/_jsxDEV(NavBar, {\n      remove: removeItem,\n      showNav: showNav,\n      displayNav: displayNav,\n      increment: increment,\n      decrement: decrement,\n      number: cartItems.length,\n      items: filteredProduct.filter(product => isInCart(product.id)).map(product => addCountToProduct(product))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container py-5\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-md-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            className: \"main-weight\",\n            children: \"All Products\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 179,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            className: \"search\",\n            onChange: event => handleSearch(event),\n            placeholder: \"Search\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 180,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"grey-bg\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container-fluid py-5\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"row\",\n          children: filteredProduct.map(item => {\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-md-6 col-lg-4 col-sm-6 margin-bottom\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-center\",\n                children: /*#__PURE__*/_jsxDEV(\"img\", {\n                  alt: \"product-img\",\n                  className: \"img-fluid img-height\",\n                  src: item.image\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 192,\n                  columnNumber: 33\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 191,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                style: {\n                  textTransform: 'capitalize'\n                },\n                className: \"text-center title\",\n                children: item.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 195,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-center\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"From\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 196,\n                  columnNumber: 56\n                }, this), \" \\xA3\", item.price]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 196,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-center title\",\n                children: [\"Stock: \", item.stock]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 197,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-center title\",\n                children: dateFormat(item.createdAt, \"dS mmmm, yyyy\")\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 200,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-center\",\n                children: /*#__PURE__*/_jsxDEV(\"button\", {\n                  disabled: !item.stock,\n                  onClick: () => changeShow(item.id),\n                  className: \"button-primary\",\n                  children: \"Add to Cart\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 203,\n                  columnNumber: 33\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 202,\n                columnNumber: 29\n              }, this)]\n            }, item.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 190,\n              columnNumber: 34\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 187,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 13\n    }, this), alert && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: {\n        position: \"fixed\"\n      },\n      children: /*#__PURE__*/_jsxDEV(Alert, {\n        color: \"primary\",\n        children: \"This is a primary alert \\u2014 check it out!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 21\n    }, this)]\n  }, void 0, true);\n}\n\n_s(Body, \"O9mBwf6BMEtWEaLks+3rRS7elXk=\");\n\n_c = Body;\n\nvar _c;\n\n$RefreshReg$(_c, \"Body\");","map":{"version":3,"sources":["/Users/USER/Robot-Market/frontend/src/components/body/index.js"],"names":["React","axios","useEffect","useState","NavBar","dateFormat","Alert","SweetAlert","Body","getProducts","get","then","products","setProducts","data","setFilteredProduct","setLoad","catch","err","console","log","load","filteredProduct","cartItems","setCartItems","alert","setAlert","changeShow","item","length","increment","displayNav","isInCart","id","map","a","includes","addCountToProduct","product","count","find","stock","removeItem","filter","decrement","cartItem","showNav","setShowNav","shouldShow","document","body","style","overflow","hidelert","handleSearch","event","value","target","toLowerCase","result","name","search","image","textTransform","price","createdAt","position"],"mappings":";;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAO,aAAP;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,SAAT,EAAoBC,QAApB,QAAoC,OAApC;AACA,OAAOC,MAAP,MAAmB,WAAnB;AACA,OAAOC,UAAP,MAAuB,YAAvB;AACA,SAASC,KAAT,QAAsB,YAAtB;AACA,OAAOC,UAAP,MAAuB,4BAAvB;;;AAEA,eAAe,SAASC,IAAT,GAAgB;AAAA;;AAG3B;AACA;AACA;AACA;AACA;AACA;AACA;AAEA,QAAMC,WAAW,GAAG,MACpBR,KAAK,CAACS,GAAN,CAAU,oDAAV,EACKC,IADL,CACUC,QAAQ,IAAI;AACdC,IAAAA,WAAW,CAACD,QAAQ,CAACE,IAAT,CAAcA,IAAf,CAAX;AACAC,IAAAA,kBAAkB,CAACH,QAAQ,CAACE,IAAT,CAAcA,IAAf,CAAlB;AACJE,IAAAA,OAAO,CAAC,KAAD,CAAP;AAEP,GANG,EAMDC,KANC,CAMKC,GAAG,IAAIC,OAAO,CAACC,GAAR,CAAYF,GAAZ,CANZ,CADA,CAX2B,CAoB7B;;;AACA,QAAM,CAACG,IAAD,EAAOL,OAAP,IAAkBb,QAAQ,CAAC,IAAD,CAAhC,CArB6B,CAuB3B;;AACA,QAAM,CAACS,QAAD,EAAWC,WAAX,IAA0BV,QAAQ,CAAC,EAAD,CAAxC,CAxB2B,CA2B3B;;AACA,QAAM,CAACmB,eAAD,EAAkBP,kBAAlB,IAAwCZ,QAAQ,CAAC,EAAD,CAAtD,CA5B2B,CA+B3B;;AACAD,EAAAA,SAAS,CAAC,MAAM;AACZO,IAAAA,WAAW;AACd,GAFQ,EAEN,EAFM,CAAT;AAGAU,EAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ,EAAoBR,QAApB;AACAO,EAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ,EAAoBC,IAApB,EApC2B,CAwC3B;;AACA,QAAM,CAACE,SAAD,EAAYC,YAAZ,IAA4BrB,QAAQ,CAAC,EAAD,CAA1C,CAzC2B,CA4C3B;;AACA,QAAM,CAACsB,KAAD,EAAQC,QAAR,IAAoBvB,QAAQ,CAAC,KAAD,CAAlC,CA7C2B,CAgD3B;;AACA,QAAMwB,UAAU,GAAIC,IAAD,IAAU;AACzB,QAAGL,SAAS,CAACM,MAAV,IAAoB,CAAvB,EAA0B;AACtBC,MAAAA,SAAS,CAACF,IAAD,CAAT;AACAG,MAAAA,UAAU,CAAC,IAAD,CAAV;AACH,KAHD,MAGO;AACLL,MAAAA,QAAQ,CAAC,IAAD,CAAR;AACD;AACJ,GAPD;;AAUAxB,EAAAA,SAAS,CAAC,MAAM;AACZiB,IAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ,EAAqBG,SAArB;AACH,GAFQ,EAEN,CAACA,SAAD,CAFM,CAAT,CA3D2B,CAgE3B;;AACA,QAAMS,QAAQ,GAAIC,EAAD,IAAQ;AACrB,WAAOV,SAAS,CAACW,GAAV,CAAcC,CAAC,IAAIA,CAAC,CAACF,EAArB,EAAyBG,QAAzB,CAAkCH,EAAlC,CAAP;AACH,GAFD,CAjE2B,CAsE3B;;;AACA,QAAMI,iBAAiB,GAAIC,OAAD,IAAa;AACnC,WAAO,EAAE,GAAGA,OAAL;AAAcC,MAAAA,KAAK,EAAEhB,SAAS,CAACiB,IAAV,CAAeL,CAAC,IAAIA,CAAC,CAACF,EAAF,KAASK,OAAO,CAACL,EAArC,EAAyCM;AAA9D,KAAP;AACH,GAFD,CAvE2B,CA4E3B;;;AACA,QAAMT,SAAS,GAAG,CAACG,EAAD,EAAKQ,KAAL,KAAe;AAC7B,QAAI,CAACT,QAAQ,CAACC,EAAD,CAAb,EAAmB;AACfT,MAAAA,YAAY,CAAC,CAAC,GAAGD,SAAJ,EAAe;AAAEU,QAAAA,EAAF;AAAMM,QAAAA,KAAK,EAAE;AAAb,OAAf,CAAD,CAAZ;AACH,KAFD,MAGK;AACDf,MAAAA,YAAY,CAACD,SAAS,CAACW,GAAV,CAAcC,CAAC,IAAI;AAC5B;AACI,YAAGA,CAAC,CAACI,KAAF,GAAU,CAAV,IAAeE,KAAlB,EAAwB;AACpB,iBAAON,CAAC,CAACF,EAAF,KAASA,EAAT,GAAe,EAAE,GAAGE,CAAL;AAAQI,YAAAA,KAAK,EAAEJ,CAAC,CAACI,KAAF,GAAU;AAAzB,WAAf,GAA8CJ,CAArD;AACH,SAFD,MAEO;AACH,cAAGA,CAAC,CAACF,EAAF,KAASA,EAAZ,EAAgB;AAChBP,YAAAA,QAAQ,CAAC,IAAD,CAAR;AACD,mBAAQ,EAAC,GAAGS,CAAJ;AAAOI,cAAAA,KAAK,EAAEE;AAAd,aAAR;AACE,WAHD,MAGO;AACL,mBAAQ,EAAC,GAAGN,CAAJ;AAAOI,cAAAA,KAAK,EAAEJ,CAAC,CAACI;AAAhB,aAAR;AACD;AAEJ;AAER,OAdY,CAAD,CAAZ;AAeH;AACJ,GArBD,CA7E2B,CAqG3B;;;AACA,QAAMG,UAAU,GAAIT,EAAD,IAAQ;AACvBT,IAAAA,YAAY,CAACD,SAAS,CAACoB,MAAV,CAAiBR,CAAC,IAAIA,CAAC,CAACF,EAAF,KAASA,EAA/B,CAAD,CAAZ;AACH,GAFD,CAtG2B,CA2G3B;;;AACA,QAAMW,SAAS,GAAIX,EAAD,IAAQ;AAEtB,QAAID,QAAQ,CAACC,EAAD,CAAZ,EAAkB;AACd,YAAMY,QAAQ,GAAGtB,SAAS,CAACiB,IAAV,CAAeZ,IAAI,IAAIA,IAAI,CAACK,EAAL,KAAYA,EAAnC,CAAjB;;AAEA,UAAIY,QAAQ,CAACN,KAAT,KAAmB,CAAvB,EAA0B;AACtBG,QAAAA,UAAU,CAACT,EAAD,CAAV;AACH,OAFD,MAGK;AACDT,QAAAA,YAAY,CAACD,SAAS,CAACW,GAAV,CAAcC,CAAC,IAAIA,CAAC,CAACF,EAAF,KAASA,EAAT,GAAc,EAAE,GAAGE,CAAL;AAAQI,UAAAA,KAAK,EAAEJ,CAAC,CAACI,KAAF,GAAU;AAAzB,SAAd,GAA6CJ,CAAhE,CAAD,CAAZ;AACH;AACJ;AAEJ,GAbD;;AAgBA,QAAM,CAACW,OAAD,EAAUC,UAAV,IAAwB5C,QAAQ,CAAC,KAAD,CAAtC,CA5H2B,CA+H3B;;AACA,QAAM4B,UAAU,GAAIiB,UAAD,IAAgB;AAC/B,QAAIA,UAAJ,EAAgB;AACZC,MAAAA,QAAQ,CAACC,IAAT,CAAcC,KAAd,CAAoBC,QAApB,GAA+B,QAA/B;AACH,KAFD,MAGK;AACDH,MAAAA,QAAQ,CAACC,IAAT,CAAcC,KAAd,CAAoBC,QAApB,GAA+B,MAA/B;AACH;;AACDL,IAAAA,UAAU,CAACC,UAAD,CAAV;AACA7B,IAAAA,OAAO,CAACC,GAAR,CAAY0B,OAAZ;AACH,GATD,CAhI2B,CA4I3B;;;AACA,QAAMO,QAAQ,GAAG,MAAM;AACnB3B,IAAAA,QAAQ,CAAC,KAAD,CAAR;AACH,GAFD,CA7I2B,CAkJ3B;;;AACC,QAAM4B,YAAY,GAAIC,KAAD,IAAW;AAC/B,QAAIC,KAAK,GAAGD,KAAK,CAACE,MAAN,CAAaD,KAAb,CAAmBE,WAAnB,EAAZ;AACA,QAAIC,MAAM,GAAG,EAAb;AACAxC,IAAAA,OAAO,CAACC,GAAR,CAAYoC,KAAZ;AACAG,IAAAA,MAAM,GAAG/C,QAAQ,CAAC+B,MAAT,CAAiB7B,IAAD,IAAU;AAC/B,aAAOA,IAAI,CAAC8C,IAAL,CAAUF,WAAV,GAAwBG,MAAxB,CAA+BL,KAA/B,KAAyC,CAAC,CAAjD;AACH,KAFQ,CAAT;AAGAzC,IAAAA,kBAAkB,CAAC4C,MAAD,CAAlB;AACA,GARD;;AAWD,sBACI;AAAA,eACClC,KAAK,iBAAI,QAAC,UAAD;AACN,MAAA,KAAK,EAAE,8BADD;AAEN,MAAA,QAAQ,EAAE4B,QAFJ;AAGN,MAAA,SAAS,EAAEA;AAHL;AAAA;AAAA;AAAA;AAAA,YADV,eAMI,QAAC,MAAD;AAAQ,MAAA,MAAM,EAAEX,UAAhB;AAA4B,MAAA,OAAO,EAAEI,OAArC;AAA8C,MAAA,UAAU,EAAEf,UAA1D;AAAsE,MAAA,SAAS,EAAED,SAAjF;AAA4F,MAAA,SAAS,EAAEc,SAAvG;AAAkH,MAAA,MAAM,EAAErB,SAAS,CAACM,MAApI;AAA4I,MAAA,KAAK,EAAEP,eAAe,CAACqB,MAAhB,CAAuBL,OAAO,IAAIN,QAAQ,CAACM,OAAO,CAACL,EAAT,CAA1C,EAAwDC,GAAxD,CAA4DI,OAAO,IAAID,iBAAiB,CAACC,OAAD,CAAxF;AAAnJ;AAAA;AAAA;AAAA;AAAA,YANJ,eAOI;AAAK,MAAA,SAAS,EAAC,gBAAf;AAAA,6BACI;AAAK,QAAA,SAAS,EAAC,KAAf;AAAA,+BACI;AAAK,UAAA,SAAS,EAAC,UAAf;AAAA,kCACI;AAAI,YAAA,SAAS,EAAC,aAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADJ,eAEI;AAAO,YAAA,IAAI,EAAC,MAAZ;AAAmB,YAAA,SAAS,EAAC,QAA7B;AAAsC,YAAA,QAAQ,EAAGiB,KAAD,IAAWD,YAAY,CAACC,KAAD,CAAvE;AAAgF,YAAA,WAAW,EAAC;AAA5F;AAAA;AAAA;AAAA;AAAA,kBAFJ;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,YAPJ,eAgBI;AAAK,MAAA,SAAS,EAAC,SAAf;AAAA,6BACI;AAAK,QAAA,SAAS,EAAC,sBAAf;AAAA,+BACI;AAAK,UAAA,SAAS,EAAC,KAAf;AAAA,oBACKjC,eAAe,CAACY,GAAhB,CAAqBN,IAAD,IAAU;AAE7B,gCAAO;AAAmB,cAAA,SAAS,EAAC,0CAA7B;AAAA,sCACL;AAAK,gBAAA,SAAS,EAAC,aAAf;AAAA,uCACI;AAAK,kBAAA,GAAG,EAAC,aAAT;AAAuB,kBAAA,SAAS,EAAC,sBAAjC;AAAwD,kBAAA,GAAG,EAAEA,IAAI,CAACkC;AAAlE;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,sBADK,eAKL;AAAG,gBAAA,KAAK,EAAE;AAACC,kBAAAA,aAAa,EAAC;AAAf,iBAAV;AAAyC,gBAAA,SAAS,EAAC,mBAAnD;AAAA,0BAAwEnC,IAAI,CAACgC;AAA7E;AAAA;AAAA;AAAA;AAAA,sBALK,eAML;AAAG,gBAAA,SAAS,EAAC,aAAb;AAAA,wCAA2B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAA3B,WAA+ChC,IAAI,CAACoC,KAApD;AAAA;AAAA;AAAA;AAAA;AAAA,sBANK,eAOL;AAAG,gBAAA,SAAS,EAAC,mBAAb;AAAA,sCAAyCpC,IAAI,CAACa,KAA9C;AAAA;AAAA;AAAA;AAAA;AAAA,sBAPK,eAUL;AAAG,gBAAA,SAAS,EAAC,mBAAb;AAAA,0BAAkCpC,UAAU,CAACuB,IAAI,CAACqC,SAAN,EAAiB,eAAjB;AAA5C;AAAA;AAAA;AAAA;AAAA,sBAVK,eAYL;AAAK,gBAAA,SAAS,EAAC,aAAf;AAAA,uCACI;AAAQ,kBAAA,QAAQ,EAAE,CAACrC,IAAI,CAACa,KAAxB;AAA+B,kBAAA,OAAO,EAAE,MAAMd,UAAU,CAACC,IAAI,CAACK,EAAN,CAAxD;AAAmE,kBAAA,SAAS,EAAC,gBAA7E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,sBAZK;AAAA,eAAUL,IAAI,CAACK,EAAf;AAAA;AAAA;AAAA;AAAA,oBAAP;AAgBD,WAlBA;AADL;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,YAhBJ,EA2CER,KAAK,iBAAK;AAAK,MAAA,SAAS,EAAE;AAACyC,QAAAA,QAAQ,EAAE;AAAX,OAAhB;AAAA,6BACR,QAAC,KAAD;AAAO,QAAA,KAAK,EAAC,SAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADQ;AAAA;AAAA;AAAA;AAAA,YA3CZ;AAAA,kBADJ;AAoDH;;GAlNuB1D,I;;KAAAA,I","sourcesContent":["import React from 'react'\nimport \"./index.css\"\nimport axios from 'axios'\nimport { useEffect, useState } from 'react';\nimport NavBar from '../navbar';\nimport dateFormat from 'dateformat';\nimport { Alert } from 'reactstrap';\nimport SweetAlert from 'react-bootstrap-sweetalert';\n\nexport default function Body() {\n\n\n    //Retrieve products from Robot api\n    // const getProducts = () =>\n    //     axios.get('http://localhost:8000/api/robots')\n    //         .then(products => {\n    //             setProducts(products.data.data)\n    //             setFilteredProduct(products.data.data)\n    // }).catch(err => console.log(err))\n\n    const getProducts = () =>\n    axios.get('https://laravelapi1.azurewebsites.net/api/products')\n        .then(products => {\n            setProducts(products.data.data)\n            setFilteredProduct(products.data.data)\n        setLoad(false)\n\n}).catch(err => console.log(err))\n\n  //Hooks for loader\n  const [load, setLoad] = useState(true)\n\n    //Hooks for products\n    const [products, setProducts] = useState([])\n\n\n    //Hooks to filter products\n    const [filteredProduct, setFilteredProduct] = useState([])\n \n\n    //Call getProducts on initstate\n    useEffect(() => {\n        getProducts()\n    }, [])\n    console.log('data', products)\n    console.log('load', load)\n\n\n\n    //Initialize items in cart\n    const [cartItems, setCartItems] = useState([])\n\n\n    //Initialize a boolean to display Alert\n    const [alert, setAlert] = useState(false)\n\n\n    //Logic to increment count. display navbar and display alert if item count is greater that 5\n    const changeShow = (item) => {\n        if(cartItems.length <= 4 ){\n            increment(item)\n            displayNav(true)\n        } else {\n          setAlert(true)\n        }\n    }\n\n\n    useEffect(() => {\n        console.log('array', cartItems)\n    }, [cartItems])\n\n\n    //Check if cart item to be this ID\n    const isInCart = (id) => {\n        return cartItems.map(a => a.id).includes(id)\n    }\n\n\n    // Add count property to product\n    const addCountToProduct = (product) => {\n        return { ...product, count: cartItems.find(a => a.id === product.id).count }\n    }\n\n\n    //Increment individual cart item\n    const increment = (id, stock) => {\n        if (!isInCart(id)) {\n            setCartItems([...cartItems, { id, count: 1 }])\n        }\n        else {\n            setCartItems(cartItems.map(a => {\n                //if count is less than or equal to stock increment but if count exceeds stock show error\n                    if(a.count + 1 <= stock){\n                        return a.id === id  ? { ...a, count: a.count + 1 } : a\n                    } else {\n                        if(a.id === id ){\n                        setAlert(true)\n                       return  {...a, count: stock }\n                        } else {\n                          return  {...a, count: a.count }\n                        }\n\n                    }\n                       \n            }))\n        }\n    }\n\n\n    //remove item from product\n    const removeItem = (id) => {\n        setCartItems(cartItems.filter(a => a.id !== id))\n    }\n\n\n    //Decrement individual Cart Item\n    const decrement = (id) => {\n        \n        if (isInCart(id)) {\n            const cartItem = cartItems.find(item => item.id === id)\n    \n            if (cartItem.count === 1) {\n                removeItem(id)\n            }\n            else {\n                setCartItems(cartItems.map(a => a.id === id ? { ...a, count: a.count - 1 } : a))\n            }\n        }\n\n    }\n\n\n    const [showNav, setShowNav] = useState(false)\n\n\n    //Display sidebar\n    const displayNav = (shouldShow) => {\n        if (shouldShow) {\n            document.body.style.overflow = \"hidden\";\n        }\n        else {\n            document.body.style.overflow = \"auto\";\n        }\n        setShowNav(shouldShow)\n        console.log(showNav)\n    }\n\n\n    //hide alertBox\n    const hidelert = () => {\n        setAlert(false)\n    }\n\n\n    //filter by material type\n     const handleSearch = (event) => {\n      let value = event.target.value.toLowerCase()\n      let result = []\n      console.log(value)\n      result = products.filter((data) => {\n          return data.name.toLowerCase().search(value) != -1;\n      })\n      setFilteredProduct(result);\n     }\n\n     \n    return (\n        <>\n        {alert && <SweetAlert\n            title={\"You cannot select more items\"}\n            onCancel={hidelert}\n            onConfirm={hidelert}>\n            </SweetAlert>}\n            <NavBar remove={removeItem} showNav={showNav} displayNav={displayNav} increment={increment} decrement={decrement} number={cartItems.length} items={filteredProduct.filter(product => isInCart(product.id)).map(product => addCountToProduct(product))} />\n            <div className=\"container py-5\">\n                <div className=\"row\">\n                    <div className=\"col-md-6\">\n                        <h1 className=\"main-weight\">All Products</h1>\n                        <input type=\"text\" className=\"search\" onChange={(event) => handleSearch(event)} placeholder='Search'/>\n\n                    </div>\n                </div>\n            </div>\n            <div className=\"grey-bg\">\n                <div className=\"container-fluid py-5\">\n                    <div className=\"row\">\n                        {filteredProduct.map((item) => {\n            \n                          return <div key={item.id} className=\"col-md-6 col-lg-4 col-sm-6 margin-bottom\">\n                            <div className=\"text-center\">\n                                <img alt=\"product-img\" className=\"img-fluid img-height\" src={item.image} />\n                            </div>\n\n                            <p style={{textTransform:'capitalize'}}  className=\"text-center title\">{item.name}</p>\n                            <p className=\"text-center\"><span>From</span> £{item.price}</p>\n                            <p className=\"text-center title\">Stock: {item.stock}</p>\n                            {/* <p className=\"text-center title\">Material: {item.material}</p> */}\n              \n                            <p className=\"text-center title\">{dateFormat(item.createdAt, \"dS mmmm, yyyy\")}</p>\n                            \n                            <div className=\"text-center\">\n                                <button disabled={!item.stock} onClick={() => changeShow(item.id)} className=\"button-primary\">Add to Cart</button>\n                            </div>\n                        </div>\n                        }\n                        )}\n\n                    </div>\n                </div>\n            </div>\n         {alert &&  <div className={{position: \"fixed\"}}>\n            <Alert color=\"primary\">\n            This is a primary alert — check it out!\n           </Alert>\n         </div> }\n\n        </>\n    )\n}\n"]},"metadata":{},"sourceType":"module"}